/* --------------------------------------------------------------------------
   6. Button
   -------------------------------------------------------------------------- */
.btn {
	display: inline-block;
	padding: var(--space-sm) var(--space-lg);
	background: var(--color-accent);
	color: white;
	font-weight: 600;
	border-radius: 8px;
	transition: background 0.3s, transform 0.3s;
}

.btn:hover,
.btn:focus {
	background: var(--color-accent-hover);
	transform: translateY(-2px);
}

/* --------------------------------------------------------------------------
   7. About Section
   -------------------------------------------------------------------------- */
.about {
	background: var(--color-bg-alt);
}

.about-grid {
	display: grid;
	gap: var(--space-xl);
}

@media (min-width: 768px) {
	.about-grid {
		grid-template-columns: 1fr 1fr;
		align-items: start;
	}
}

.about-text p {
	margin-bottom: var(--space-md);
	color: var(--color-text-muted);
	clip-path: inset(0 0 100% 0);
}

.about-text.visible p {
	animation: fadeInText 3s ease-out forwards;
}

@keyframes fadeInText {
	from {
		clip-path: inset(0 0 100% 0);
	}
	to {
		clip-path: inset(0 0 0 0);
	}
}

.title.studies {
	position: relative;
	display: block;
	width: 100%;
}

.title.studies::before {
	content: '';
	position: absolute;
	left: 0;
	width: 100%;
	height: 3px;
	background: #e71313;
	box-shadow: 0 0 5px #e71313, 0 0 10px #e71313;
	top: -8px;
	transform: scaleX(1);
	opacity: 1;
}

.skills-grid {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	gap: var(--space-md);
}

.skill-card {
	background: var(--color-bg);
	padding: var(--space-md);
	border-radius: 12px;
	text-align: center;
}

.skill-icon {
	font-size: var(--text-2xl);
	display: block;
	margin-bottom: var(--space-sm);
}

.skill-card h3 {
	font-size: var(--text-sm);
	margin-bottom: var(--space-sm);
	font-weight: 600;
}

.skill-bar {
	height: 12px;
	background: var(--color-bg-alt);
	border-radius: 3px;
	overflow: hidden;
}

.skill-fill {
	height: 100%;
	width: 0;
	background: var(--color-skill-fill); /* use dedicated skill color, not --color-accent */
	border-radius: 3px;
	transition: width 1s var(--ease-out) 0.3s;
	position: relative;
	overflow: hidden;
}

.skill-fill::after {
	content: '';
	position: absolute;
	top: 0;
	left: -100%;
	width: 100%;
	height: 100%;
	background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
	animation: liquid 2s ease-in-out infinite;
}

/* --------------------------------------------------------------------------
   UNDERLINE HOVER
   ---------------------------------------------------------------------------*/

/* Nav link underline hover (applies to Home / About / Projects / Contact) */
.nav-links a {
  position: relative;
  color: inherit;
  text-decoration: none;
  padding-bottom: 6px;
  display: inline-block;
}

.nav-links a::after,
.nav-links a::before {
  content: '';
  position: absolute;
  left: 0;
  width: 100%;
  height: 3px;
  /* laser line */
  background: #e71313;
  box-shadow: 0 0 5px #e71313, 0 0 10px #e71313;
  bottom: -4px;
  transform: scaleX(0);
  transform-origin: right;
  transition: transform .35s ease-out, opacity .35s ease-out;
  opacity: 1;
}

.nav-links a::before {
  top: -4px;
  bottom: auto;
  transform-origin: left;
  opacity: 0; /* keep top line hidden by default */
}

.nav-links a:hover::after,
.nav-links a:focus::after,
.nav-links a:hover::before,
.nav-links a:focus::before {
  transform: scaleX(1);
  opacity: 1;
}

/* Keep a small utility for any elements using .hover-underline */
.hover-underline {
  position: relative;
  display: inline-block;
}
.hover-underline::after,
.hover-underline::before {
  content: '';
  position: absolute;
  width: 100%;
  height: 2px;
  /* single color line */
  background: #f461a3;
  left: 0;
  bottom: -4px;
  transform: scaleX(0);
  transform-origin: right;
  transition: transform .35s ease-out;
}
.hover-underline::before { top: -4px; transform-origin: left; }
.hover-underline:hover::after,
.hover-underline:hover::before { transform: scaleX(1); }

/* --------------------------------------------------------------------------
   FLIP CARDS
   ---------------------------------------------------------------------------*/

.card {
  width: 200px;
  height: 250px;
  margin: 1rem auto;
  perspective: 1000px;
  cursor: pointer;
}

.card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}

.card:hover .card-inner {
  transform: rotateY(180deg);
}

.card-front,
.card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.5rem;
}

.card-front {
  background:  rgba(201, 13, 13, 0.9);
  border: 5px solid  rgba(201, 13, 13, 0.9);
  box-shadow: 0 0 10px rgba(231, 19, 19, 0.5), 0 0 20px rgba(231, 19, 19, 0.3);
  animation: box-glow 3s ease-in-out infinite alternate;
}

.card-back {
  background: var(--color-nav);
  color: white;
  transform: rotateY(180deg);
  box-shadow: 0 0 10px rgba(231, 19, 19, 0.5), 0 0 20px rgba(231, 19, 19, 0.3);
  animation: box-glow 3s ease-in-out infinite alternate;
}


/* --------------------------------------------------------------------------
   Ensure active nav link shows the same underline/overline as hover and uses the active color
   -------------------------------------------------------------------------- */
.nav-links a.active {
  color: white;
  text-shadow: 
    0 0 10px rgba(255, 255, 255, 0.8),
    0 0 20px rgba(255, 255, 255, 0.6),
    0 0 30px rgba(255, 255, 255, 0.4);
}

.nav-links a.active::after,
.nav-links a.active::before {
  transform: scaleX(1);
  opacity: 1;
}

/* --------------------------------------------------------------------------
   HOLOGRAPHIC BUTTON EFFECT
   ---------------------------------------------------------------------------*/

.holographic-container {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;                 
  min-height: 20vh;           
  height: 100vh;              
  background: #000;
  padding: var(--space-lg) 0; 
  box-sizing: border-box;
}

.holographic-card {
  width: min(250px, 70%);     
  max-width: 40%;
  margin: 0 auto;            
  height: auto;              
  padding: var(--space-xs);  
  aspect-ratio: 4/1;         
  background: #111;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  overflow: hidden;
  border-radius: 15px;
  transition: all 0.5s ease;
  font-family: 'Audiowide', sans-serif;
  font-size: 1.5rem;
  animation: glow 2s infinite;
}

@keyframes glow {
  0%, 100% {
    box-shadow: none;
  }
  50% {
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
  }
}

.holographic-card h2 {
  color: rgb(255, 0, 0);
  font-size: 1.5rem;
  position: relative;
  z-index: 2;
}

.holographic-card::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    0deg, 
    transparent, 
    transparent 30%, 
    rgba(255, 0, 0, 0.3)
  );
  transform: rotate(-45deg);
  transition: all 0.5s ease;
  opacity: 0;
}

.holographic-card:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
}

.holographic-card:hover::before {
  opacity: 1;
  transform: rotate(-45deg) translateY(100%);
}


/* Animate skill bars when revealed */
[data-reveal-stagger].revealed .skill-fill {
	width: var(--fill);
}

/* --------------------------------------------------------------------------
   ICONS
   ---------------------------------------------------------------------------*/

.skill-card .skill-icon img {
  width: 48px;
  height: 48px;
  max-width: 100%;
  object-fit: contain;
  display: inline-block;
  vertical-align: middle;
}

/* --------------------------------------------------------------------------
   8. Projects Section
   -------------------------------------------------------------------------- */
.projects-grid {
	display: grid;
	gap: var(--space-lg);
}

@media (min-width: 640px) {
	.projects-grid {
		grid-template-columns: repeat(2, 1fr);
	}
}

@media (min-width: 1024px) {
	.projects-grid {
		grid-template-columns: repeat(3, 1fr);
	}
}

/* Add an extra column on very wide screens so the fourth card sits at the far right */
@media (min-width: 1280px) {
	.projects-grid {
		grid-template-columns: repeat(4, 1fr);
	}
}

.project-card {
	background: transparent; /* remove boxed background */
	border-radius: 0; /* no rounded container */
	overflow: visible; /* let the card edges show */
	transition: none; /* remove container hover */
	box-shadow: none;
	padding: 0;
}

.project-card:hover {
	transform: none;
	box-shadow: none;
}

.project-image {
	/* Allow flip card to define size and not be clipped by container */
	aspect-ratio: auto;
	overflow: visible;
}

.project-image img {
	width: 100%;
	height: 100%;
	object-fit: cover;
	transition: transform 0.5s;
}

.project-card:hover .project-image img {
	transform: none; /* keep flip card hover handling, avoid extra image scale */
}

.project-content {
	padding: var(--space-md);
}

.project-content h3 {
	font-size: var(--text-lg);
	margin-bottom: var(--space-sm);
}

.project-content p {
	font-size: var(--text-sm);
	color: var(--color-text-muted);
	margin-bottom: var(--space-md);
}

.project-tags {
	display: flex;
	gap: var(--space-xs);
	flex-wrap: wrap;
}

.project-tags span {
	font-size: var(--text-xs);
	padding: 4px 8px;
	background: var(--color-bg);
	border-radius: 4px;
	color: var(--color-accent);
}

/* --------------------------------------------------------------------------
   MOUSE TRAIL EFFECT
   -------------------------------------------------------------------------- */

#trailCanvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 9999;
    
}


/* --------------------------------------------------------------------------
   9. Contact Section
   -------------------------------------------------------------------------- */
.contact {
	background: var(--color-bg-alt);
	text-align: center;
}

.contact-content p {
	font-size: var(--text-lg);
	color: var(--color-text-muted);
	margin-bottom: var(--space-lg);
}

.social-links {
	display: flex;
	justify-content: center;
	gap: var(--space-lg);
	margin-top: var(--space-lg);
}

.social-links a {
	color: var(--color-text-muted);
	transition: color 0.3s;
}

.social-links a:hover {
	color: var(--color-accent);
}

/* --------------------------------------------------------------------------
   10. Footer
   -------------------------------------------------------------------------- */
.footer {
	padding: var(--space-lg) 0;
	text-align: center;
	color: var(--color-text-muted);
	font-size: var(--text-sm);
}

.footer .container {
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.back-to-top {
	width: 40px;
	height: 40px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--color-bg-alt);
	border-radius: 50%;
	transition: background 0.3s, transform 0.3s;
}

.back-to-top:hover {
	background: var(--color-accent);
	transform: translateY(-3px);
}

/* --------------------------------------------------------------------------
   11. SCROLL REVEAL ANIMATIONS (IntersectionObserver-driven)

   ðŸŽ“ THE CSS + JAVASCRIPT PARTNERSHIP:
   The JavaScript IntersectionObserver (in main.js) adds classes when elements
   enter the viewport. CSS handles the actual animation via transitions.

   This separation of concerns is powerful:
   - JS: "When should the animation start?" (viewport detection)
   - CSS: "How should the animation look?" (visual effects)

   ðŸ“ THE PATTERN:
   1. Elements start with opacity: 0 and transform: translateY(30px)
   2. JavaScript adds .visible class when element enters viewport
   3. CSS transitions smoothly animate to opacity: 1 and translateY(0)

   âš¡ PERFORMANCE NOTE:
   We ONLY animate `transform` and `opacity` because these properties:
   - Don't trigger layout recalculation (expensive!)
   - Don't trigger repaint (also expensive!)
   - Run on the GPU compositor thread (fast! 60fps!)

   NEVER animate: width, height, margin, padding, top, left, etc.
   These trigger layout and will cause jank (stuttering).
   -------------------------------------------------------------------------- */

/*
 * SINGLE ELEMENT REVEAL
 *
 * Use class="animate-on-scroll" on any element you want to fade in.
 * JavaScript will add .visible when it scrolls into view.
 */
.animate-on-scroll {
	opacity: 0;                      /* Start invisible */
	transform: translateY(30px);     /* Start 30px below final position */

	/*
	 * TRANSITION SHORTHAND EXPANDED:
	 *
	 * transition: [property] [duration] [timing-function]
	 *
	 * We're transitioning TWO properties (opacity AND transform).
	 * Both use var(--duration-normal) = 0.6s
	 * Both use var(--ease-out) = our custom easing curve
	 */
	transition: opacity var(--duration-normal) var(--ease-out),
	            transform var(--duration-normal) var(--ease-out);
}

.animate-on-scroll.visible {
	opacity: 1;              /* Fade in */
	transform: translateY(0); /* Move to final position */
}

/* --------------------------------------------------------------------------
   STAGGERED REVEAL ANIMATION

   ðŸŽ“ WHAT IS STAGGERING?
   Staggering means animating children elements one after another instead of
   all at once. This creates a "cascade" or "wave" effect that draws the eye
   and feels more dynamic than everything appearing simultaneously.

   ðŸ“ HOW IT WORKS:
   1. Parent has [data-reveal-stagger] attribute
   2. All children start invisible (opacity: 0, translateY)
   3. When parent gets .revealed class, children animate with increasing delays
   4. transition-delay creates the stagger: 0.1s, 0.2s, 0.3s, 0.4s, etc.

   ðŸ’¡ DATA ATTRIBUTES:
   We use data-* attributes instead of classes because:
   - They're semantic: "this element reveals with stagger"
   - They can hold values: data-stagger-delay="0.2s" (future enhancement)
   - They're easily queryable: [data-reveal-stagger]
   -------------------------------------------------------------------------- */
[data-reveal-stagger] > * {
	opacity: 0;
	transform: translateY(20px);
	transition: opacity 0.5s var(--ease-out),
	            transform 0.5s var(--ease-out);
}

/*
 * STAGGER DELAYS USING :nth-child
 *
 * Each child gets a progressively longer delay.
 * Child 1: 0.1s delay, Child 2: 0.2s delay, etc.
 *
 * This creates the "wave" effect as elements appear one by one.
 *
 * âš ï¸ LIMITATION: This only works for up to 6 children. For dynamic
 * content with unknown child count, you'd need JavaScript to set delays.
 */
[data-reveal-stagger].revealed > *:nth-child(1) { transition-delay: 0.1s; }
[data-reveal-stagger].revealed > *:nth-child(2) { transition-delay: 0.2s; }
[data-reveal-stagger].revealed > *:nth-child(3) { transition-delay: 0.3s; }
[data-reveal-stagger].revealed > *:nth-child(4) { transition-delay: 0.4s; }
[data-reveal-stagger].revealed > *:nth-child(5) { transition-delay: 0.5s; }
[data-reveal-stagger].revealed > *:nth-child(6) { transition-delay: 0.6s; }

[data-reveal-stagger].revealed > * {
	opacity: 1;
	transform: translateY(0);
}

/* --------------------------------------------------------------------------
   12. ACCESSIBILITY: REDUCED MOTION

   ðŸŽ“ WHY THIS MATTERS:
   Some users experience motion sickness, vestibular disorders, or seizures
   triggered by animations. Others simply find motion distracting.

   The `prefers-reduced-motion` media query respects user preferences set in
   their operating system settings:
   - macOS: System Preferences â†’ Accessibility â†’ Display â†’ Reduce motion
   - Windows: Settings â†’ Ease of Access â†’ Display â†’ Show animations
   - iOS: Settings â†’ Accessibility â†’ Motion â†’ Reduce Motion

   âš–ï¸ LEGAL REQUIREMENT:
   WCAG 2.1 Success Criterion 2.3.3 requires respecting user motion preferences.
   Ignoring this can expose you to accessibility lawsuits.

   ðŸ“ OUR APPROACH:
   When reduced motion is preferred, we:
   1. Disable ALL animations and transitions (near-instant 0.01ms)
   2. Make animated elements immediately visible (no waiting)
   3. Disable smooth scrolling (instant jumps instead)

   ðŸ’¡ WHY 0.01ms INSTEAD OF 0ms?
   Some browsers have bugs with 0ms duration. 0.01ms is effectively instant
   but avoids those edge cases.

   ðŸ”— LEARN MORE: https://web.dev/prefers-reduced-motion/
   -------------------------------------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
	/*
	 * NUCLEAR OPTION: Disable ALL animations/transitions globally
	 *
	 * The !important ensures this overrides any other animation styles.
	 * This is one of the few legitimate uses of !important.
	 */
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;  /* Instant scroll, no smooth */
	}

	/*
	 * ENSURE ANIMATED CONTENT IS VISIBLE
	 *
	 * Without this, elements with opacity: 0 would stay invisible forever
	 * since the animation that reveals them is now disabled.
	 */
	.animate-on-scroll,
	[data-reveal-stagger] > * {
		opacity: 1;        /* Fully visible */
		transform: none;   /* No transform offset */
	}

	/*
	 * SKILL BARS: Show at full width immediately
	 */
	.skill-fill {
		width: var(--fill);
		transition: none;
	}
}

/* --------------------------------------------------------------------------
   13. Mobile Adjustments
   -------------------------------------------------------------------------- */
@media (max-width: 640px) {
	.nav-links {
		display: none; /* Would be hamburger menu in production */
	}

	.footer .container {
		flex-direction: column;
		gap: var(--space-md);
	}
}

/* --------------------------------------------------------------------------
   STUDIES LIST (logos next to study names)
   --------------------------------------------------------------------------*/
.studies {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}
.study-item {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}
.study-logo {
  width: 170px;
  height: 170px;
  object-fit: contain;
  border-radius: 8px;
}

@media (max-width: 640px) {
  .study-logo {
    width: 96px;
    height: 96px;
  }
}
.study-info .study-name {
  font-weight: 600;
}
.study-info .study-status {
  color: var(--color-text-muted);
  font-size: 0.95rem;
}

/* Intrinsic sizing: let specific cards size to their image */
.project-image--intrinsic {
	display: inline-block;
	width: auto;
	max-width: 100%;
}

/* Make intrinsic card act like a normal flip card but scale to image width */
.card--intrinsic {
	display: inline-block;
	width: auto;
	height: auto;
	max-width: 420px; /* cap width so it doesn't get huge */
	perspective: 1200px;
}

.card--intrinsic .card-inner {
	position: relative;
	width: 100%;
	height: 100%;
	transition: transform 0.6s;
	transform-style: preserve-3d;
}

.card--intrinsic:hover .card-inner,
.card--intrinsic:focus .card-inner {
	transform: rotateY(180deg);
}

.card--intrinsic .card-front,
.card--intrinsic .card-back {
	position: absolute;
	width: 100%;
	height: 100%;
	backface-visibility: hidden;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: inherit;
	overflow: hidden;
}

.card--intrinsic .card-front img {
	width: 100%;
	height: auto;
	max-width: 100%;
	display: block;
}

.card--intrinsic .card-back {
	background: var(--color-nav);
	transform: rotateY(180deg);
}

/* Simple lightbox for viewing card images */
.lightbox-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.85);
  z-index: 2000;
  padding: var(--space-lg);
  box-sizing: border-box;
  cursor: zoom-out;
}

.lightbox-modal img {
  max-width: 100%;
  max-height: 100%;
  border-radius: 8px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.6);
  display: block;
}

.lightbox-modal.hidden {
  display: none;
}

/* Filters for projects */
.projects-filters {
  display: flex;
  gap: var(--space-sm);
  justify-content: center;
  margin: var(--space-md) 0;
  flex-wrap: wrap;
}

.filter-btn {
  background: rgba(201, 13, 13, 0.9); /* per-button red container requested */
  color: #ffffff; /* ensure readable text */
  border: 1px solid rgba(0,0,0,0.06);
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: transform 180ms var(--ease-out),
              box-shadow 180ms var(--ease-out),
              filter 180ms linear;
  will-change: transform, box-shadow;
}

.filter-btn:hover,
.filter-btn:focus {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 10px 24px rgba(0,0,0,0.25);
  filter: brightness(1.06);
}

.filter-btn:active {
  transform: translateY(0) scale(0.995);
}

.filter-btn:focus-visible {
  outline: 3px solid rgba(255,255,255,0.12);
  outline-offset: 4px;
}

/* Keep the active state styling */
.filter-btn[aria-pressed="true"] {
  background: rgba(201, 13, 13, 0.95); /* slightly stronger when active */
  color: #ffffff;
  border-color: transparent;
}

/* Hidden cards (used by JS) */
.project-card[style*="display: none"] {
  opacity: 0;
  transform: scale(.98);
  transition: opacity 0.25s ease, transform 0.25s ease;
  height: 0; /* collapse to avoid gaps when hidden */
  padding: 0;
  margin: 0;
  overflow: hidden;
}

@keyframes liquid {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

@keyframes box-glow {
  0% {
    box-shadow: 0 0 10px rgba(231, 19, 19, 0.5), 0 0 20px rgba(231, 19, 19, 0.3);
  }
  100% {
    box-shadow: 0 0 20px rgba(231, 19, 19, 0.8), 0 0 30px rgba(231, 19, 19, 0.6), 0 0 40px rgba(231, 19, 19, 0.4);
  }
}